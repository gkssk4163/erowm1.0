{% extends 'accounting/base.html' %}

{% block menu %}
	{% include 'accounting/admin_menu.html' %}
{% endblock %}

{% block content %}
<h1 class="mb-3">계좌관리</h1>

<div class="row mb-4">
	<div class="col-md-12">
		<div class="table-responsive">
			<table class="table table-bordered table-hover table-sm th-nowrap td-nowrap">
				<thead class="thead-light text-nowrap">
					<tr>
						<th>번호</th>
						<th>사용자ID</th>
						<th>사용자명</th>
						<th>계좌번호</th>
						<th>은행명</th>
						<th>계좌구분</th>
						<th>계좌상태</th>
						<th>계좌상세</th>
						<th>등록일</th>
						<th>최근조회일</th>
					</tr>
				</thead>
				<tbody>
					{% for account in accounts %}
					<tr>
						<td>{{ forloop.counter }}</td>
						<td>{{ account.mid }}</td>
						<td>{{ account.mname }}</td>
						<td>{{ account.actaccountnum }}</td>
						<td>{{ account.bkname }}</td>
						<td>{{ account.accounttype }}</td>
						<td {% if account.acttag == "오류" %} class="text-danger font-weight-bold"{% endif %}>{{ account.acttag }}</td>
						<td {% if account.acttag == "오류" %} class="text-danger font-weight-bold"{% endif %}>{{ account.act_status }}</td>
						<td>{{ account.regdate }}</td>
						<td>{{ account.last_scraping_dtm }}</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
<script type="text/javascript">
	function accountDelete(mid, actaccountnum) {
		$.ajax({
			type: "post"
			,url: "{% url 'bankda_account_delete' %}"
            ,data: {
                'csrfmiddlewaretoken': '{{ csrf_token }}'
                ,'username': mid
                ,'bkacctno': actaccountnum
            }
			,dataType: "json"
			,success: function(data) {

			}
			,error: function(xhr, status, message) {
			}
		});
	}
</script>
{% endblock %}
